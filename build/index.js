(()=>{"use strict";const e=window.React,t=window.wc.wcSettings,n=window.wc.wcBlocksRegistry,o=(e,t=2)=>e/Math.pow(10,t),a=(e,t)=>{if(!t||!t.length)return 0;for(let n=0;n<t.length;n++)if(t[n].key===e)return o(t[n].value,wcSettings.currency.precision);return 0},r=(e,t,n)=>{e.setCustomerInfo({firstName:t?.billingData?.first_name,lastName:t?.billingData?.last_name,email:t?.billingData?.email,phoneNumber:t?.billingData?.phone}).setBillingAddress({firstName:t?.billingData?.first_name,lastName:t?.billingData?.last_name,email:t?.billingData?.email,phoneNumber:t?.billingData?.phone,streetAddress:t?.billingData?.address_1,streetAddress2:t?.billingData?.address_2,city:t?.billingData?.city,state:t?.billingData?.state,postalCode:t?.billingData?.postcode,country:t?.billingData?.country}).setOrderInfo({taxAmount:a("total_tax",t?.cartTotalItems),shippingAmount:a("total_shipping",t?.cartTotalItems),discountAmount:a("total_discount",t?.cartTotalItems),orderItems:n?.cartItems?.map((e=>({name:e.name,quantity:e.quantity||1,sku:e.sku,unitPrice:o(Number(e.prices?.price),wcSettings.currency.precision),totalAmount:o(Number(e.totals?.line_total),wcSettings.currency.precision)})))})},s=()=>{const e=document.getElementsByClassName("wc-block-components-checkout-place-order-button");for(let t=0;t<e.length;t++)e[t].style.display="none"},l=()=>{const e=document.getElementsByClassName("wc-block-components-checkout-place-order-button");for(let t=0;t<e.length;t++)e[t].style.display=""},c=t=>{console.log("[PayfurlCardComponent]",t);const{eventRegistration:n,emitResponse:a,billing:s,cartData:c}=t,{onPaymentSetup:p}=n;let i=!1;return(0,e.useEffect)((()=>{if(window._pf&&t&&!i){l();const e=o(s?.cartTotal?.value||0,wcSettings.currency.precision),t=wcSettings.currency.code;i=!0,window._pf.addCardLeastCost("payfurl-card-component",e,t,{style:"compact",threeDSEmail:s?.billingData?.email,createNetworkToken:!1,tokenAuthenticationEnabled:!1,clickToPayEnabled:!0}),r(window._pf,s,c)}}),[]),(0,e.useEffect)((()=>{const e=p((async()=>new Promise(((e,t)=>{window._pf.onFailure((e=>{console.log("[PayfurlCardComponent][Payfurl SDK onFailure]",e),t({type:a.responseTypes.ERROR,message:e})})),window._pf.onSuccess((t=>{console.log("[PayfurlCardComponent][Payfurl SDK onSuccess]",t),e({type:a.responseTypes.SUCCESS,meta:{paymentMethodData:{payfurl_token:t.token,payfurl_transaction_id:t.transactionId}}})})),window._pf.execute()}))));return()=>{e()}}),[a.responseTypes.ERROR,a.responseTypes.SUCCESS,p]),(0,e.createElement)("div",{id:"payfurl-card-component"})},p=t=>{console.log("[PayfurlPaypalComponent]",t);const{eventRegistration:n,emitResponse:a,billing:l,cartData:c}=t,{onPaymentSetup:p}=n;let i=!1,y="";return(0,e.useEffect)((()=>{if(window._pf&&t&&!i){s();const e=o(l?.cartTotal?.value||0,wcSettings.currency.precision),t=wcSettings.currency.code;i=!0,window._pf.addPaypal("payfurl-paypal-component",e,t).onFailure((e=>{console.log("[PayfurlPaypalComponent][Payfurl SDK onFailure]",e)})).onSuccess((e=>{console.log("[PayfurlPaypalComponent][Payfurl SDK onSuccess]",e),y=e.transactionId,document.getElementsByClassName("wc-block-components-checkout-place-order-button")[0].click()})),r(window._pf,l,c)}}),[]),(0,e.useEffect)((()=>{const e=p((async()=>new Promise(((e,t)=>{if(console.log("[PayfurlPaypalComponent], onPaymentSetup"),!y)return t({type:a.responseTypes.ERROR,message:"PayPal transaction was not completed"});e({type:a.responseTypes.SUCCESS,meta:{paymentMethodData:{payfurl_transaction_id:y}}})}))));return()=>{e()}}),[a.responseTypes.ERROR,a.responseTypes.SUCCESS,p]),(0,e.createElement)("div",{id:"payfurl-paypal-component"})},i=t=>{console.log("[PayfurlCheckoutComponent]",t);const{eventRegistration:n,emitResponse:a,billing:l,cartData:c}=t,{provider:p}=t,{onPaymentSetup:i}=n;let y=!1,u="";return(0,e.useEffect)((()=>{if(window._pf&&t&&!y){s();const e=o(l?.cartTotal?.value||0,wcSettings.currency.precision),t=wcSettings.currency.code;y=!0,r(window._pf,l,c),window._pf.addCheckout("payfurl-"+p.providerType+"-component",e,t,p.providerType,p.providerId,{},p.options).onFailure((e=>{console.log("[PayfurlCheckoutComponent][Payfurl SDK onFailure]",e)})).onSuccess((e=>{console.log("[PayfurlCheckoutComponent][Payfurl SDK onSuccess]",e),u=e.transactionId,document.getElementsByClassName("wc-block-components-checkout-place-order-button")[0].click()}))}}),[]),(0,e.useEffect)((()=>{const e=i((async()=>new Promise(((e,t)=>{if(console.log("[PayfurlCheckoutComponent], onPaymentSetup"),!u)return t({type:a.responseTypes.ERROR,message:"PayPal transaction was not completed"});e({type:a.responseTypes.SUCCESS,meta:{paymentMethodData:{payfurl_transaction_id:u}}})}))));return()=>{e()}}),[a.responseTypes.ERROR,a.responseTypes.SUCCESS,i]),(0,e.createElement)("div",{id:`payfurl-${p.providerType}-component`})},y=t=>{console.log("[PayfurlPayToComponent]",t);const{eventRegistration:n,emitResponse:a,billing:s,cartData:c}=t,{onPaymentSetup:p}=n;let i=!1;return(0,e.useEffect)((()=>{if(window._pf&&t&&!i){l();const e=o(s?.cartTotal?.value||0,wcSettings.currency.precision);wcSettings.currency.code,i=!0,window._pf.addPayTo("payfurl-payto-component",e),r(window._pf,s,c)}}),[]),(0,e.useEffect)((()=>{const e=p((async()=>new Promise(((e,t)=>{window._pf.onFailure((e=>{console.log("[PayfurlPayToComponent][Payfurl SDK onFailure]",e),t({type:a.responseTypes.ERROR,message:e})})),window._pf.onSuccess((t=>{console.log("[PayfurlPayToComponent][Payfurl SDK onSuccess]",t),e({type:a.responseTypes.SUCCESS,meta:{paymentMethodData:{payfurl_token:t.token,payfurl_transaction_id:t.transactionId}}})})),window._pf.execute()}))));return()=>{e()}}),[a.responseTypes.ERROR,a.responseTypes.SUCCESS,p]),(0,e.createElement)("div",{id:"payfurl-payto-component"})},u=t=>{console.log("[PayfurlGooglePayComponent]",t);const{eventRegistration:n,emitResponse:a,billing:l,cartData:c}=t,{provider:p}=t,{onPaymentSetup:i}=n;let y=!1,u="";return(0,e.useEffect)((()=>{if(window._pf&&t&&!y){s();const e=o(l?.cartTotal?.value||0,wcSettings.currency.precision),t=wcSettings.currency.code;y=!0,r(window._pf,l,c),window._pf.addGooglePay("payfurl-googlepay-component",e,t).onFailure((e=>{console.log("[PayfurlGooglePayComponent][Payfurl SDK onFailure]",e)})).onSuccess((e=>{console.log("[PayfurlGooglePayComponent][Payfurl SDK onSuccess]",e),u=e.transactionId,document.getElementsByClassName("wc-block-components-checkout-place-order-button")[0].click()}))}}),[]),(0,e.useEffect)((()=>{const e=i((async()=>new Promise(((e,t)=>{if(console.log("[PayfurlGooglePayComponent], onPaymentSetup"),!u)return t({type:a.responseTypes.ERROR,message:"GooglePay transaction was not completed"});e({type:a.responseTypes.SUCCESS,meta:{paymentMethodData:{payfurl_transaction_id:u}}})}))));return()=>{e()}}),[a.responseTypes.ERROR,a.responseTypes.SUCCESS,i]),(0,e.createElement)("div",{id:"payfurl-googlepay-component"})},d=t=>{console.log("[PayfurlApplePayComponent]",t);const{eventRegistration:n,emitResponse:a,billing:l,cartData:c}=t,{provider:p}=t,{onPaymentSetup:i}=n;let y=!1,u="";return(0,e.useEffect)((()=>{if(window._pf&&t&&!y){s();const e=o(l?.cartTotal?.value||0,wcSettings.currency.precision),t=wcSettings.currency.code;y=!0,r(window._pf,l,c),window._pf.addApplePay("payfurl-applepay-component",e,t).onFailure((e=>{console.log("[PayfurlApplePayComponent][Payfurl SDK onFailure]",e)})).onSuccess((e=>{console.log("[PayfurlApplePayComponent][Payfurl SDK onSuccess]",e),u=e.transactionId,document.getElementsByClassName("wc-block-components-checkout-place-order-button")[0].click()}))}}),[]),(0,e.useEffect)((()=>{const e=i((async()=>new Promise(((e,t)=>{if(console.log("[PayfurlApplePayComponent], onPaymentSetup"),!u)return t({type:a.responseTypes.ERROR,message:"ApplePay transaction was not completed"});e({type:a.responseTypes.SUCCESS,meta:{paymentMethodData:{payfurl_transaction_id:u}}})}))));return()=>{e()}}),[a.responseTypes.ERROR,a.responseTypes.SUCCESS,i]),(0,e.createElement)("div",{id:"payfurl-applepay-component"})},m=(0,t.getSetting)("payfurl_data");console.log("settings",m);function f(e){switch(e){case"azupay":return"PayID";case"pay_by_account":return"Pay by Account";case"upi":return"UPI";default:return(t=e).charAt(0).toUpperCase()+t.slice(1)}var t}m?.providersInfo?.hasCardProviders&&(0,n.registerPaymentMethod)({name:"payfurl_card",paymentMethodId:"payfurl_card",content:(0,e.createElement)(c,null),edit:(0,e.createElement)(c,null),canMakePayment:e=>new Promise((e=>{e(!0)})),savedTokenComponent:(0,e.createElement)((t=>(console.log("SavedTokenHandler",t),(0,e.createElement)("div",null,"SavedTokenHandler"))),null),label:(0,e.createElement)("strong",null,m.title),ariaLabel:"PayFURL Payments",supports:{features:["products"],showSavedCards:!0,showSaveOption:!0}}),m?.providersInfo?.hasPaypalProviders&&(0,n.registerPaymentMethod)({name:"payfurl_paypal",paymentMethodId:"payfurl_paypal",content:(0,e.createElement)(p,null),edit:(0,e.createElement)(p,null),canMakePayment:e=>new Promise((e=>{e(!0)})),label:(0,e.createElement)("strong",null,"PayPal"),ariaLabel:"PayFURL Payments",supports:{features:["products"],showSavedCards:!1,showSaveOption:!1}}),m?.providersInfo?.hasPayToProviders&&(0,n.registerPaymentMethod)({name:"payfurl_payto",paymentMethodId:"payfurl_payto",content:(0,e.createElement)(y,null),edit:(0,e.createElement)(y,null),canMakePayment:e=>new Promise((e=>{e(!0)})),label:(0,e.createElement)("strong",null,"PayTo"),ariaLabel:"PayFURL Payments",supports:{features:["products"],showSavedCards:!1,showSaveOption:!1}}),m?.enable_googlepay&&m?.providersInfo?.hasGooglePayProviders&&(0,n.registerPaymentMethod)({name:"payfurl_googlepay",paymentMethodId:"payfurl_googlepay",content:(0,e.createElement)(u,null),edit:(0,e.createElement)(u,null),canMakePayment:e=>new Promise((e=>{e(!0)})),label:(0,e.createElement)("strong",null,"Google Pay"),ariaLabel:"PayFURL Payments",supports:{features:["products"],showSavedCards:!1,showSaveOption:!1}}),/^((?!chrome|android).)*safari/i.test(navigator.userAgent)&&m?.enable_applepay&&m?.providersInfo?.hasApplePayProviders&&(0,n.registerPaymentMethod)({name:"payfurl_applepay",paymentMethodId:"payfurl_applepay",content:(0,e.createElement)(d,null),edit:(0,e.createElement)(d,null),canMakePayment:e=>new Promise((e=>{e(!0)})),label:(0,e.createElement)("strong",null,"Apple Pay"),ariaLabel:"PayFURL Payments",supports:{features:["products"],showSavedCards:!1,showSaveOption:!1}}),m?.providersInfo?.hasBnplProviders&&m?.providersInfo?.bnplProviders.forEach((t=>{(0,n.registerPaymentMethod)({name:"payfurl_"+t.providerType,paymentMethodId:"payfurl_"+t.providerType,content:(0,e.createElement)(i,{provider:t}),edit:(0,e.createElement)(i,{provider:t}),canMakePayment:e=>new Promise((e=>{e(!0)})),label:(0,e.createElement)("strong",null,f(t.providerType)),ariaLabel:"PayFURL Payments",supports:{features:["products"],showSavedCards:!1,showSaveOption:!1}})}))})();